<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gen Con Schedule Exporter</title>
  <link rel="stylesheet" href="pico.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
	<header class="container"  style="transform: scale(0.95); transform-origin: 0 0; width: 600px;" >
	<h1>Gen Con Schedule Exporter</h1>
	<small>Simple tool to help you grab your gencon schedule as JSON data (loads it in a tab), which you can paste back into this tool for export as an iCal (.ics) file for your convenience.
	<br>
	Follow the steps below to safely access your schedule data.
	</header>
	<main class="container"  style="transform: scale(0.95); transform-origin: 0 0; width: 600px;">

	<div id="step1">
	<div>
		<label for="schedule-url"><strong>Copy the URL of your schedule page and paste it here.</strong></label>
		<small>(looks like this: <code>www.gencon.com/schedules/123456?c=indy2025</code>)</small>
		<br>
		<small>Make sure you're logged into Gen Con website so that the page can load - you will be redirected to your own data to copy and paste next.)</small>
		<input type="text" id="schedule-url"></input>
		<small> A new tab will open that should display the JSON data of your schedule. Copy everything that displays in the new tab and return to this page.</small>
	</div>
	<div>
		<button onclick="setMessage('');getSched();">Get schedule data</button>
	</div>
	</div>

	<div id="step2" class="hidden">
	<div>
	<label for="txt"><strong>Paste schedule JSON content here</strong></label>
	 <textarea id="txt"></textarea>
	</div>
	<div>
	  <button onclick="setMessage('');process();">Generate .ics</button>
	</div>


	</div>

	<div id="step3" class="hidden">
		<strong>Schedule generated.</strong>
	<br>
	<div id="dl-link"></div>
	</div>
	<div><h4 id="msg"></h2></div>
	</main>
	<footer class="container"  style="transform: scale(0.95); transform-origin: 0 0; width: 600px;">
	<div>
		<small>Your data is safe - this page works completely in your local browser, no information is transferred to the host of this page or stored on any server.</small>
		<small>Caveat: this page is created as a convenience / toy. No guarantees are made on accuracy or behavior. Check your schedules for accuracy. Pull requests welcome.</small>
		<br>
		<small>Projects used in this tool: ical.js, Pico CSS</small>
	</div>
	</footer>

  <script src="https://unpkg.com/ical.js/dist/ical.es5.min.cjs"></script>
  <script src="script.js"></script>
</body>
</html>
